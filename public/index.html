<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Online Shop for digital products" />
    <link rel="apple-touch-icon" href="/logo192.png" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Store Notify</title>
 
  </head>
  <body><noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="text/javascript">
      minHeight = 900; prevHeight = 0;
      parentURL = 'https://storenotify.in';
      // Listen for parent message
  window.addEventListener('message', (event) => {
    if (event.origin !== parentURL) return;
    console.log('Received message from parent:', event.data);
     document.body.scrollHeight =event.data.iframeHeight;
     prevHeight = document.body.style.minHeight;
     let height = document.body.scrollHeight;

     document.body.style.minHeight = height + 'px';
     if(height >=  (prevHeight+100 ) || height <=  (prevHeight-100 )){ 
      console.log("height not changed"  ); }else  {
     // event.source.postMessage({ iframeHeight: minHeight }, '*');
          }
     
    // Reply back to parent
    //event.source.postMessage({ message: 'HELLO_FROM_IFRAME' }, event.origin);
  });
function sendHeightToParent() {
			    let height = document.body.scrollHeight;
          if(height < minHeight) height = minHeight;
          console.log("document scroll height: ", height);
          console.log("document minHeight: ", document.body.style.minHeight);
          console.log("document height: ",  document.height);
          document.body.style.minHeight = height + 'px';
          console.log("document minHeight: ", document.body.style.minHeight);
          if(height >=  (prevHeight+100 ) || height <=  (prevHeight-100 )){ console.log("height not changed"  ); }else  {
             parent.postMessage({ iframeHeight: height }, '*');
          }
			   
  			}

		  window.addEventListener('load', sendHeightToParent);
		 // window.addEventListener('resize', sendHeightToParent);
    </script>

  </body>
</html>